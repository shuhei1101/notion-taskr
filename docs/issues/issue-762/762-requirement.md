# Issue`762`ã®ä»•æ§˜æ›¸

## å¤‰æ›´å±¥æ­´
- 2025/5/14: åˆç‰ˆä½œæˆ(å¤‰æ›´è€…: GitHub Copilot)
- 2025/5/14: é€šçŸ¥æ–¹æ³•`Line`ã®å‰Šé™¤(å¤‰æ›´è€…: ãƒ¦ãƒ¼ã‚¶)
  - é€šçŸ¥æ–¹æ³•ã¯ã€Slackã«çµ±ä¸€ã™ã‚‹ãŸã‚`Line`ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚
- 2025/5/14: è¨˜è¼‰ä¾‹ã®å‰Šé™¤(å¤‰æ›´è€…: ãƒ¦ãƒ¼ã‚¶)
  - è¨˜è¼‰ä¾‹ã¯ã€å¿…è¦ãªã„ãŸã‚å‰Šé™¤ã—ã¾ã—ãŸã€‚
- 2025/5/14: Rimindã‚¯ãƒ©ã‚¹ã®è¿½åŠ (å¤‰æ›´è€…: GitHub Copilot)
  - ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰ã®è¦æœ›ã‚’å—ã‘ã¦ã€ãƒªãƒã‚¤ãƒ³ãƒ‰å±æ€§ã‚’ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹Rimindã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

## ç”¨èª
- notiontaskr: æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åç§°
- ãƒªãƒã‚¤ãƒ³ãƒ‰: ã‚¿ã‚¹ã‚¯ã®é–‹å§‹æ™‚åˆ»ã‚„çµ‚äº†æ™‚åˆ»ã®å‰ã«é€šçŸ¥ã‚’è¡Œã†ã“ã¨

## ä¾é ¼å†…å®¹
- issueç•ªå·: 762
- ã‚¿ã‚¤ãƒˆãƒ«: ã‚¿ã‚¹ã‚¯ãƒªãƒã‚¤ãƒ³ãƒ‰æ©Ÿèƒ½ã®å®Ÿè£…
- å†…å®¹: 
  - é¸æŠæœŸé–“ã®ã‚¿ã‚°ã®ã‚¿ã‚¹ã‚¯ã®é–‹å§‹ã«ãƒªãƒã‚¤ãƒ³ãƒ‰ã‚’è¨­å®š
  - ã‚‚ã—ãã¯ã€é¸æŠã—ãŸIDã®ã‚¿ã‚¹ã‚¯ã«å…¨ã¦ãƒªãƒã‚¤ãƒ³ãƒ‰ã‚’è¨­å®š
  - ã‚¿ã‚¹ã‚¯ã®å±æ€§ã«ã€Œé–‹å§‹nåˆ†å‰é€šçŸ¥ã€ã€Œçµ‚äº†nåˆ†å‰é€šçŸ¥ã€ã‚’è¿½åŠ 
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®é€šçŸ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°=é–‹å§‹5åˆ†å‰ã€çµ‚äº†5åˆ†å‰
  - Util:to_hm(from: datetime)ã®ä½œæˆ

## æ©Ÿèƒ½è¦ä»¶/éæ©Ÿèƒ½è¦ä»¶
### æ©Ÿèƒ½è¦ä»¶
- é¸æŠã—ãŸæœŸé–“å†…ã®ã‚¿ã‚°ä»˜ãã‚¿ã‚¹ã‚¯ã®é–‹å§‹æ™‚åˆ»ã«ãƒªãƒã‚¤ãƒ³ãƒ‰ã‚’è¨­å®šã§ãã‚‹ã“ã¨
- é¸æŠã—ãŸIDã®ã‚¿ã‚¹ã‚¯å…¨ã¦ã«ãƒªãƒã‚¤ãƒ³ãƒ‰ã‚’è¨­å®šã§ãã‚‹ã“ã¨
- ã‚¿ã‚¹ã‚¯ã®å±æ€§ã«ã€Œé–‹å§‹nåˆ†å‰é€šçŸ¥ã€ã€Œçµ‚äº†nåˆ†å‰é€šçŸ¥ã€ã‚’è¿½åŠ ã§ãã‚‹ã“ã¨
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®é€šçŸ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯é–‹å§‹5åˆ†å‰ã€çµ‚äº†5åˆ†å‰ã§ã‚ã‚‹ã“ã¨
- Slackã§ãƒªãƒã‚¤ãƒ³ãƒ‰ã‚’é€ä¿¡ã§ãã‚‹ã“ã¨

### éæ©Ÿèƒ½è¦ä»¶
- 1åˆ†é–“éš”ã®å®šæœŸå®Ÿè¡Œã§ã€ã‚¿ã‚¹ã‚¯ã®é–‹å§‹5åˆ†å‰ã®ã‚¿ã‚¹ã‚¯ã‚’ã™ã¹ã¦å›åã§ãã‚‹ã“ã¨
- å›åã—ãŸã‚¿ã‚¹ã‚¯ã®é€šçŸ¥ã‚’Slackã«éåŒæœŸã§é€ä¿¡ã§ãã‚‹ã“ã¨
- é€šçŸ¥å‡¦ç†ã¯å®‰å®šã—ã¦å‹•ä½œã—ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã‚‚ãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã‚‹ã“ã¨

## ä½¿ç”¨ãƒ„ãƒ¼ãƒ«/ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- Slack API (Slackã¸ã®é€šçŸ¥ç”¨)
- notionãŸskrã®æ—¢å­˜æ©Ÿèƒ½
- asyncio (éåŒæœŸå‡¦ç†ç”¨)

## 7. ã‚¿ã‚¹ã‚¯ã®åå‰ã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã®è¿½åŠ 
### 7.1. ç¾åœ¨ã®ãƒ«ãƒ¼ãƒ«
- ã‚¿ã‚¹ã‚¯ã®åå‰ã¯ã€ä»¥ä¸‹ã®å½¢å¼ã§ã‚ã‚‹ã“ã¨
  - `[ID] ã‚¿ã‚¹ã‚¯å [â±ï¸äººæ™‚] [è¦ªID]` 
- å„ãƒ©ãƒ™ãƒ«ã¯ã€ä»¥ä¸‹ã®å½¢å¼ã§ã‚ã‚‹ã“ã¨
  - `[key-value]`
  - keyã«ã¯ã€çµµæ–‡å­—ã‚„æ¼¢å­—ä¸€æ–‡å­—ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹
  - valueã«ã¯è‡ªç”±å½¢å¼ã®æ–‡å­—åˆ—ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹

### 7.2. è¿½åŠ ãƒ«ãƒ¼ãƒ«
- æ–°è¦ãƒ©ãƒ™ãƒ«ã§é€šçŸ¥ç”¨ãƒ©ãƒ™ãƒ«ã®ä½œæˆ
- é€šçŸ¥ç”¨ãƒ©ãƒ™ãƒ«ã¯ãƒ¦ãƒ¼ã‚¶è‡ªèº«ãŒNotion ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ä¸Šã§ç›´æ¥è¨­å®šã™ã‚‹ã€‚
- é€šçŸ¥ç”¨ãƒ©ãƒ™ãƒ«ã¯ã€ä»¥ä¸‹ã®å½¢å¼ã§ã‚ã‚‹ã“ã¨
  - key: ğŸ””
  - value: 5m(10mãªã©ã®åˆ†æ•°)

## 8. ã‚¯ãƒ©ã‚¹è¨­è¨ˆ
### 8.1. `Remind`ã‚¯ãƒ©ã‚¹(æ–°è¦)
#### ãƒ¡ãƒ³ãƒ:
- `before_start_min: int`
  - èª¬æ˜: é–‹å§‹nåˆ†å‰ã«é€šçŸ¥ã‚’è¡Œã†ãŸã‚ã®è¨­å®šå€¤
- `before_end_min: int`
  - èª¬æ˜: çµ‚äº†nåˆ†å‰ã«é€šçŸ¥ã‚’è¡Œã†ãŸã‚ã®è¨­å®šå€¤

#### ãƒ¡ã‚½ãƒƒãƒ‰:
- `is_start_reminder_enabled() -> bool`
  - èª¬æ˜: 
    - é–‹å§‹ãƒªãƒã‚¤ãƒ³ãƒ‰ãŒæœ‰åŠ¹ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹
    - `before_start_min`ãŒ0ã‚ˆã‚Šå¤§ãã„å ´åˆã«Trueã‚’è¿”ã™
- `is_end_reminder_enabled() -> bool`
  - èª¬æ˜: 
    - çµ‚äº†ãƒªãƒã‚¤ãƒ³ãƒ‰ãŒæœ‰åŠ¹ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹
    - `before_end_min`ãŒ0ã‚ˆã‚Šå¤§ãã„å ´åˆã«Trueã‚’è¿”ã™

### 8.2. `Task`ã‚¯ãƒ©ã‚¹(æ—¢å­˜)ã®æ‹¡å¼µ
#### ãƒ¡ãƒ³ãƒ: 
- `remind: Remind`
  - èª¬æ˜: ãƒªãƒã‚¤ãƒ³ãƒ‰è¨­å®šã‚’ä¿æŒã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

#### ãƒ¡ã‚½ãƒƒãƒ‰
  - `from_response`
    - æ–°è¦ãƒ©ãƒ™ãƒ«`é€šçŸ¥ãƒ©ãƒ™ãƒ«`ã«å¯¾å¿œã™ã‚‹ã‚ˆã†ã«ä¿®æ­£(TaskNameã‚¯ãƒ©ã‚¹ã®ä¿®æ­£ç­‰)

### 8.3. `TaskReminder`ã‚¯ãƒ©ã‚¹(æ–°è¦)
#### èª¬æ˜:
- ã‚¿ã‚¹ã‚¯ã®ãƒªãƒã‚¤ãƒ³ãƒ‰ã‚’ç®¡ç†ã™ã‚‹ã‚¯ãƒ©ã‚¹
- ã‚¿ã‚¹ã‚¯ã®é–‹å§‹æ™‚åˆ»ã‚„çµ‚äº†æ™‚åˆ»ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¤ãƒ³ãƒ‰å¯¾è±¡ã®ã‚¿ã‚¹ã‚¯ã‚’æŠ½å‡ºã™ã‚‹
#### ãƒ¡ã‚½ãƒƒãƒ‰: 
- `find_tasks_to_remind_start(current_time: datetime, minutes_before: int = 5) -> List[Task]`
  - èª¬æ˜: ç¾åœ¨æ™‚åˆ»ã‹ã‚‰æŒ‡å®šåˆ†æ•°å¾Œã«é–‹å§‹ã™ã‚‹ã‚¿ã‚¹ã‚¯ã‚’æŠ½å‡ºã™ã‚‹
- `find_tasks_to_remind_end(current_time: datetime, minutes_before: int = 5) -> List[Task]`
  - èª¬æ˜: ç¾åœ¨æ™‚åˆ»ã‹ã‚‰æŒ‡å®šåˆ†æ•°å¾Œã«çµ‚äº†ã™ã‚‹ã‚¿ã‚¹ã‚¯ã‚’æŠ½å‡ºã™ã‚‹
- `send_reminder(task: Task, is_start: bool) -> None`
  - èª¬æ˜: ã‚¿ã‚¹ã‚¯ã®ãƒªãƒã‚¤ãƒ³ãƒ‰ã‚’é€ä¿¡ã™ã‚‹

### 8.4. `Notifier`ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹(æ–°è¦)
#### èª¬æ˜:
- é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- ä»Šå¾Œã€Lineãªã©ä»–ã®é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¿½åŠ ã™ã‚‹éš›ã«åˆ©ç”¨ã™ã‚‹

#### ãƒ¡ã‚½ãƒƒãƒ‰:
- `async notify(message: str) -> bool`
  - èª¬æ˜: é€šçŸ¥ã‚’é€ä¿¡ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
  - å¼•æ•°:
    - `message`: é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  - æˆ»ã‚Šå€¤:
    - æˆåŠŸã—ãŸå ´åˆã¯Trueã€å¤±æ•—ã—ãŸå ´åˆã¯False

### 8.5. `SlackNotifier(Notifier)`ã‚¯ãƒ©ã‚¹(æ–°è¦)
#### èª¬æ˜:
- Slacké€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã®å®Ÿè£…
- `Notifier`ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ãŸSlacké€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹

#### ãƒ¡ã‚½ãƒƒãƒ‰: 
- `async notify(message: str) -> bool`
  - èª¬æ˜: Slackã«é€šçŸ¥ã‚’é€ä¿¡ã™ã‚‹

### `ReminderJob`ã‚¯ãƒ©ã‚¹(æ–°è¦)
#### ãƒ¡ã‚½ãƒƒãƒ‰: 
- `run() -> None`
  - èª¬æ˜: ãƒªãƒã‚¤ãƒ³ãƒ‰å¯¾è±¡ã®ã‚¿ã‚¹ã‚¯ã‚’æŠ½å‡ºã—ã€é€šçŸ¥ã‚’é€ä¿¡ã™ã‚‹
- `schedule_job() -> None`
  - èª¬æ˜: 1åˆ†é–“éš”ã§runãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã™ã‚‹

### `TimeUtil`ã‚¯ãƒ©ã‚¹(æ–°è¦)
#### ãƒ¡ã‚½ãƒƒãƒ‰: 
- `to_hm(from: datetime) -> str`
  - èª¬æ˜: æ—¥æ™‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰æ™‚åˆ»ï¼ˆHH:MMå½¢å¼ï¼‰ã‚’å–å¾—ã™ã‚‹

#### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
- æ­£å¸¸ç³»:
  - `find_tasks_to_remind_start`ãƒ¡ã‚½ãƒƒãƒ‰ã®æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆ
    - å…¥åŠ›: ç¾åœ¨æ™‚åˆ», é€šçŸ¥åˆ†æ•°å‰
    - æœŸå¾…å€¤: é€šçŸ¥å¯¾è±¡ã®ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ
  - `find_tasks_to_remind_end`ãƒ¡ã‚½ãƒƒãƒ‰ã®æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆ
    - å…¥åŠ›: ç¾åœ¨æ™‚åˆ», é€šçŸ¥åˆ†æ•°å‰
    - æœŸå¾…å€¤: é€šçŸ¥å¯¾è±¡ã®ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ
  - `send_reminder`ãƒ¡ã‚½ãƒƒãƒ‰ã®æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆ
    - å…¥åŠ›: ã‚¿ã‚¹ã‚¯, é–‹å§‹/çµ‚äº†ãƒ•ãƒ©ã‚°
    - æœŸå¾…å€¤: ãªã—ï¼ˆé€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã‚‹ã“ã¨ï¼‰
  - `to_hm`ãƒ¡ã‚½ãƒƒãƒ‰ã®æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆ
    - å…¥åŠ›: datetime.datetime(2025, 5, 14, 12, 30)
    - æœŸå¾…å€¤: "12:30"
- ç•°å¸¸ç³»:
  - é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ãŒåˆ©ç”¨ã§ããªã„å ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
    - å…¥åŠ›: é€šçŸ¥é€ä¿¡å‡¦ç†
    - æœŸå¾…å€¤: ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãŒè¨˜éŒ²ã•ã‚Œã€ä¾‹å¤–ãŒã‚­ãƒ£ãƒƒãƒã•ã‚Œã‚‹ã“ã¨

## UML
### ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³
```mermaid
sequenceDiagram
    participant Job as ReminderJob
    participant Reminder as TaskReminder
    participant Service as NotificationService
    participant Task
    
    Job->>Reminder: find_tasks_to_remind_start(current_time, 5)
    Reminder->>Job: tasks
    
    loop For each task
        Job->>Reminder: send_reminder(task, is_start=True)
        Reminder->>Service: async_notify(message, service_type)
        Service-->>Reminder: 
    end
    
    Job->>Reminder: find_tasks_to_remind_end(current_time, 5)
    Reminder->>Job: tasks
    
    loop For each task
        Job->>Reminder: send_reminder(task, is_start=False)
        Reminder->>Service: async_notify(message, service_type)
        Service-->>Reminder: 
    end
```
### ã‚¯ãƒ©ã‚¹å›³
```mermaid
classDiagram
    class Remind {
        +before_start_min: int
        +before_end_min: int
        +is_start_reminder_enabled(): bool
        +is_end_reminder_enabled(): bool
    }
    
    class Task {
        +remind: Remind
    }
    
    class TaskReminder {
        +find_tasks_to_remind_start(current_time: datetime, minutes_before: int): List[Task]
        +find_tasks_to_remind_end(current_time: datetime, minutes_before: int): List[Task]
        +send_reminder(task: Task, is_start: bool): None
    }
    
    class NotificationService {
        +send_slack_notification(message: str): bool
        +async_notify(message: str, service_type: str): None
    }
    
    class ReminderJob {
        +run(): None
        +schedule_job(): None
    }
    
    class TimeUtil {
        +to_hm(from: datetime): str
    }
    
    Task --> Remind: has
    ReminderJob --> TaskReminder: uses
    TaskReminder --> NotificationService: uses
    TaskReminder --> Task: manages
    TaskReminder --> TimeUtil: uses
```

## ã‚¿ã‚¹ã‚¯
- [ ] ã‚¿ã‚¹ã‚¯ãƒªãƒã‚¤ãƒ³ãƒ‰æ©Ÿèƒ½ã®å®Ÿè£…(12h)
  - [ ] Remindãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å®Ÿè£…(2h)
    - Remind.before_start_minå±æ€§ãŠã‚ˆã³before_end_minå±æ€§ã®å®Ÿè£…
    - Remind.is_start_reminder_enabled()ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…
    - Remind.is_end_reminder_enabled()ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…
  - [ ] ã‚¿ã‚¹ã‚¯å±æ€§æ‹¡å¼µã®å®Ÿè£…(2h)
    - Taskã‚¯ãƒ©ã‚¹ã«Task.remindå±æ€§ã‚’è¿½åŠ 
    - ã‚¿ã‚¹ã‚¯ä½œæˆ/æ›´æ–°æ™‚ã«ãƒªãƒã‚¤ãƒ³ãƒ‰è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼ˆé–‹å§‹5åˆ†å‰ã€çµ‚äº†5åˆ†å‰ï¼‰ã§åˆæœŸåŒ–
  - [ ] ãƒªãƒã‚¤ãƒ³ãƒ‰å¯¾è±¡ã‚¿ã‚¹ã‚¯æŠ½å‡ºãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…(3h)
    - TaskReminder.find_tasks_to_remind_start(current_time, minutes_before)ã®å®Ÿè£…
    - TaskReminder.find_tasks_to_remind_end(current_time, minutes_before)ã®å®Ÿè£…
    - æœŸé–“æŒ‡å®šã§ã®ã‚¿ã‚¹ã‚¯æŠ½å‡ºæ©Ÿèƒ½ã®æ‹¡å¼µï¼ˆã‚¿ã‚°ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼‰
  - [ ] é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã®å®Ÿè£…(3h)
    - NotificationService.send_slack_notification(message)ã®å®Ÿè£…
    - NotificationService.async_notify(message, service_type)ã®å®Ÿè£…
    - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ­ã‚°è¨˜éŒ²æ©Ÿèƒ½ã®å®Ÿè£…
  - [ ] å®šæœŸå®Ÿè¡Œã‚¸ãƒ§ãƒ–ã®å®Ÿè£…(3h)
    - ReminderJob.run()ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…
    - ReminderJob.schedule_job()ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…
  - [ ] ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®å®Ÿè£…(1h)
    - TimeUtil.to_hm(from)é–¢æ•°ã®å®Ÿè£…




